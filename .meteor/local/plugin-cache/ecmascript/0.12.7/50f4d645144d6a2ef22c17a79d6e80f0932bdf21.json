{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/pgiani/www/meteor-example-optimize-client-bundle/packages/xolvio:cleaner/cleaner.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"packages/xolvio:cleaner/cleaner.js","filename":"/Users/pgiani/www/meteor-example-optimize-client-bundle/packages/xolvio:cleaner/cleaner.js","passPerPreset":false,"envName":"development","cwd":"/Users/pgiani/www/meteor-example-optimize-client-bundle","root":"/Users/pgiani/www/meteor-example-optimize-client-bundle","plugins":[{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"presets":[],"generatorOpts":{"filename":"/Users/pgiani/www/meteor-example-optimize-client-bundle/packages/xolvio:cleaner/cleaner.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/xolvio:cleaner/cleaner.js"}},"code":"if (Meteor.isServer) {\n  const _resetDatabase = function (options) {\n    if (process.env.NODE_ENV !== 'development') {\n      throw new Error('resetDatabase is not allowed outside of a development mode. ' + 'Aborting.');\n    }\n\n    options = options || {};\n    var excludedCollections = ['system.indexes'];\n\n    if (options.excludedCollections) {\n      excludedCollections = excludedCollections.concat(options.excludedCollections);\n    }\n\n    var db = MongoInternals.defaultRemoteCollectionDriver().mongo.db;\n    var getCollections = Meteor.wrapAsync(db.collections, db);\n    var collections = getCollections();\n\n    var appCollections = _.reject(collections, function (col) {\n      return col.collectionName.indexOf('velocity') === 0 || excludedCollections.indexOf(col.collectionName) !== -1;\n    });\n\n    _.each(appCollections, function (appCollection) {\n      var remove = Meteor.wrapAsync(appCollection.remove, appCollection);\n      remove({}, {});\n    });\n  };\n\n  Meteor.methods({\n    'xolvio:cleaner/resetDatabase': function (options) {\n      _resetDatabase(options);\n    }\n  });\n\n  resetDatabase = function (options, callback) {\n    _resetDatabase(options);\n\n    if (typeof callback === 'function') {\n      callback();\n    }\n  };\n}\n\nif (Meteor.isClient) {\n  resetDatabase = function (options, callback) {\n    Meteor.call('xolvio:cleaner/resetDatabase', options, callback);\n  };\n}","map":{"version":3,"sources":["packages/xolvio:cleaner/cleaner.js"],"names":["Meteor","isServer","_resetDatabase","options","process","env","NODE_ENV","Error","excludedCollections","concat","db","MongoInternals","defaultRemoteCollectionDriver","mongo","getCollections","wrapAsync","collections","appCollections","_","reject","col","collectionName","indexOf","each","appCollection","remove","methods","resetDatabase","callback","isClient","call"],"mappings":"AAAA,IAAIA,MAAM,CAACC,QAAX,EAAqB;AACnB,QAAMC,cAAc,GAAG,UAAUC,OAAV,EAAmB;AACxC,QAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1C,YAAM,IAAIC,KAAJ,CACJ,iEACA,WAFI,CAAN;AAID;;AAEDJ,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,QAAIK,mBAAmB,GAAG,CAAC,gBAAD,CAA1B;;AACA,QAAIL,OAAO,CAACK,mBAAZ,EAAiC;AAC/BA,MAAAA,mBAAmB,GAAGA,mBAAmB,CAACC,MAApB,CAA2BN,OAAO,CAACK,mBAAnC,CAAtB;AACD;;AAED,QAAIE,EAAE,GAAGC,cAAc,CAACC,6BAAf,GAA+CC,KAA/C,CAAqDH,EAA9D;AACA,QAAII,cAAc,GAAGd,MAAM,CAACe,SAAP,CAAiBL,EAAE,CAACM,WAApB,EAAiCN,EAAjC,CAArB;AACA,QAAIM,WAAW,GAAGF,cAAc,EAAhC;;AACA,QAAIG,cAAc,GAAGC,CAAC,CAACC,MAAF,CAASH,WAAT,EAAsB,UAAUI,GAAV,EAAe;AACxD,aAAOA,GAAG,CAACC,cAAJ,CAAmBC,OAAnB,CAA2B,UAA3B,MAA2C,CAA3C,IACLd,mBAAmB,CAACc,OAApB,CAA4BF,GAAG,CAACC,cAAhC,MAAoD,CAAC,CADvD;AAED,KAHoB,CAArB;;AAKAH,IAAAA,CAAC,CAACK,IAAF,CAAON,cAAP,EAAuB,UAAUO,aAAV,EAAyB;AAC9C,UAAIC,MAAM,GAAGzB,MAAM,CAACe,SAAP,CAAiBS,aAAa,CAACC,MAA/B,EAAuCD,aAAvC,CAAb;AACAC,MAAAA,MAAM,CAAC,EAAD,EAAK,EAAL,CAAN;AACD,KAHD;AAID,GA1BD;;AA4BAzB,EAAAA,MAAM,CAAC0B,OAAP,CAAe;AACb,oCAAgC,UAAUvB,OAAV,EAAmB;AACjDD,MAAAA,cAAc,CAACC,OAAD,CAAd;AACD;AAHY,GAAf;;AAMAwB,EAAAA,aAAa,GAAG,UAASxB,OAAT,EAAkByB,QAAlB,EAA4B;AAC1C1B,IAAAA,cAAc,CAACC,OAAD,CAAd;;AACA,QAAI,OAAOyB,QAAP,KAAoB,UAAxB,EAAoC;AAAEA,MAAAA,QAAQ;AAAK;AACpD,GAHD;AAKD;;AACD,IAAI5B,MAAM,CAAC6B,QAAX,EAAqB;AACnBF,EAAAA,aAAa,GAAG,UAASxB,OAAT,EAAkByB,QAAlB,EAA4B;AAC1C5B,IAAAA,MAAM,CAAC8B,IAAP,CAAY,8BAAZ,EAA4C3B,OAA5C,EAAqDyB,QAArD;AACD,GAFD;AAGD","sourcesContent":["if (Meteor.isServer) {\n  const _resetDatabase = function (options) {\n    if (process.env.NODE_ENV !== 'development') {\n      throw new Error(\n        'resetDatabase is not allowed outside of a development mode. ' +\n        'Aborting.'\n      );\n    }\n\n    options = options || {};\n    var excludedCollections = ['system.indexes'];\n    if (options.excludedCollections) {\n      excludedCollections = excludedCollections.concat(options.excludedCollections);\n    }\n\n    var db = MongoInternals.defaultRemoteCollectionDriver().mongo.db;\n    var getCollections = Meteor.wrapAsync(db.collections, db);\n    var collections = getCollections();\n    var appCollections = _.reject(collections, function (col) {\n      return col.collectionName.indexOf('velocity') === 0 ||\n        excludedCollections.indexOf(col.collectionName) !== -1;\n    });\n\n    _.each(appCollections, function (appCollection) {\n      var remove = Meteor.wrapAsync(appCollection.remove, appCollection);\n      remove({}, {});\n    });\n  };\n\n  Meteor.methods({\n    'xolvio:cleaner/resetDatabase': function (options) {\n      _resetDatabase(options);\n    }\n  });\n\n  resetDatabase = function(options, callback) {\n    _resetDatabase(options);\n    if (typeof callback === 'function') { callback(); }\n  }\n\n}\nif (Meteor.isClient) {\n  resetDatabase = function(options, callback) {\n    Meteor.call('xolvio:cleaner/resetDatabase', options, callback);\n  }\n}\n"]},"sourceType":"script","hash":"50f4d645144d6a2ef22c17a79d6e80f0932bdf21"}
