{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"simpl-schema","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"SimpleSchema"}]},{"source":"meteor/mdg:validated-method","imported":["ValidatedMethod"],"specifiers":[{"kind":"named","imported":"ValidatedMethod","local":"ValidatedMethod"}]},{"source":"./documents","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Documents"}]},{"source":"../../modules/rate-limit.js","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"rateLimit"}]}],"exports":{"exported":["upsertDocument","removeDocument"],"specifiers":[{"kind":"local","local":"upsertDocument","exported":"upsertDocument"},{"kind":"local","local":"removeDocument","exported":"removeDocument"}]}}},"options":{"filename":"imports/api/documents/methods.js","filenameRelative":"imports/api/documents/methods.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/api/documents/methods.js.map","sourceFileName":"imports/api/documents/methods.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"methods"},"ignored":false,"code":"module.export({\n  upsertDocument: function () {\n    return upsertDocument;\n  },\n  removeDocument: function () {\n    return removeDocument;\n  }\n});\nvar SimpleSchema = void 0;\nmodule.watch(require(\"simpl-schema\"), {\n  \"default\": function (v) {\n    SimpleSchema = v;\n  }\n}, 0);\nvar ValidatedMethod = void 0;\nmodule.watch(require(\"meteor/mdg:validated-method\"), {\n  ValidatedMethod: function (v) {\n    ValidatedMethod = v;\n  }\n}, 1);\nvar Documents = void 0;\nmodule.watch(require(\"./documents\"), {\n  \"default\": function (v) {\n    Documents = v;\n  }\n}, 2);\nvar rateLimit = void 0;\nmodule.watch(require(\"../../modules/rate-limit.js\"), {\n  \"default\": function (v) {\n    rateLimit = v;\n  }\n}, 3);\nvar upsertDocument = new ValidatedMethod({\n  name: 'documents.upsert',\n  validate: new SimpleSchema({\n    _id: {\n      type: String,\n      optional: true\n    },\n    title: {\n      type: String,\n      optional: true\n    },\n    body: {\n      type: String,\n      optional: true\n    }\n  }).validator(),\n  run: function (document) {\n    return Documents.upsert({\n      _id: document._id\n    }, {\n      $set: document\n    });\n  }\n});\nvar removeDocument = new ValidatedMethod({\n  name: 'documents.remove',\n  validate: new SimpleSchema({\n    _id: {\n      type: String\n    }\n  }).validator(),\n  run: function (_ref) {\n    var _id = _ref._id;\n    Documents.remove(_id);\n  }\n});\nrateLimit({\n  methods: [upsertDocument, removeDocument],\n  limit: 5,\n  timeRange: 1000\n});","map":{"version":3,"sources":["imports/api/documents/methods.js"],"names":["module","export","upsertDocument","removeDocument","SimpleSchema","watch","require","v","ValidatedMethod","Documents","rateLimit","name","validate","_id","type","String","optional","title","body","validator","run","document","upsert","$set","remove","methods","limit","timeRange"],"mappings":"AAAAA,OAAOC,MAAP,CAAc;AAACC,kBAAe;AAAA,WAAIA,cAAJ;AAAA,GAAhB;AAAmCC,kBAAe;AAAA,WAAIA,cAAJ;AAAA;AAAlD,CAAd;AAAqF,IAAIC,qBAAJ;AAAiBJ,OAAOK,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAAA,uBAASC,CAAT,EAAW;AAACH,mBAAaG,CAAb;AAAe;AAA3B,CAArC,EAAkE,CAAlE;AAAqE,IAAIC,wBAAJ;AAAoBR,OAAOK,KAAP,CAAaC,QAAQ,6BAAR,CAAb,EAAoD;AAACE,iBAAD,YAAiBD,CAAjB,EAAmB;AAACC,sBAAgBD,CAAhB;AAAkB;AAAtC,CAApD,EAA4F,CAA5F;AAA+F,IAAIE,kBAAJ;AAAcT,OAAOK,KAAP,CAAaC,QAAQ,aAAR,CAAb,EAAoC;AAAA,uBAASC,CAAT,EAAW;AAACE,gBAAUF,CAAV;AAAY;AAAxB,CAApC,EAA8D,CAA9D;AAAiE,IAAIG,kBAAJ;AAAcV,OAAOK,KAAP,CAAaC,QAAQ,6BAAR,CAAb,EAAoD;AAAA,uBAASC,CAAT,EAAW;AAACG,gBAAUH,CAAV;AAAY;AAAxB,CAApD,EAA8E,CAA9E;AAKpX,IAAML,iBAAiB,IAAIM,eAAJ,CAAoB;AAChDG,QAAM,kBAD0C;AAEhDC,YAAU,IAAIR,YAAJ,CAAiB;AACzBS,SAAK;AAAEC,YAAMC,MAAR;AAAgBC,gBAAU;AAA1B,KADoB;AAEzBC,WAAO;AAAEH,YAAMC,MAAR;AAAgBC,gBAAU;AAA1B,KAFkB;AAGzBE,UAAM;AAAEJ,YAAMC,MAAR;AAAgBC,gBAAU;AAA1B;AAHmB,GAAjB,EAIPG,SAJO,EAFsC;AAOhDC,KAPgD,YAO5CC,QAP4C,EAOlC;AACZ,WAAOZ,UAAUa,MAAV,CAAiB;AAAET,WAAKQ,SAASR;AAAhB,KAAjB,EAAwC;AAAEU,YAAMF;AAAR,KAAxC,CAAP;AACD;AAT+C,CAApB,CAAvB;AAYA,IAAMlB,iBAAiB,IAAIK,eAAJ,CAAoB;AAChDG,QAAM,kBAD0C;AAEhDC,YAAU,IAAIR,YAAJ,CAAiB;AACzBS,SAAK;AAAEC,YAAMC;AAAR;AADoB,GAAjB,EAEPI,SAFO,EAFsC;AAKhDC,KALgD,kBAKnC;AAAA,QAAPP,GAAO,QAAPA,GAAO;AACXJ,cAAUe,MAAV,CAAiBX,GAAjB;AACD;AAP+C,CAApB,CAAvB;AAUPH,UAAU;AACRe,WAAS,CACPvB,cADO,EAEPC,cAFO,CADD;AAKRuB,SAAO,CALC;AAMRC,aAAW;AANH,CAAV","file":"imports/api/documents/methods.js.map","sourcesContent":["import SimpleSchema from 'simpl-schema';\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport Documents from './documents';\nimport rateLimit from '../../modules/rate-limit.js';\n\nexport const upsertDocument = new ValidatedMethod({\n  name: 'documents.upsert',\n  validate: new SimpleSchema({\n    _id: { type: String, optional: true },\n    title: { type: String, optional: true },\n    body: { type: String, optional: true },\n  }).validator(),\n  run(document) {\n    return Documents.upsert({ _id: document._id }, { $set: document });\n  },\n});\n\nexport const removeDocument = new ValidatedMethod({\n  name: 'documents.remove',\n  validate: new SimpleSchema({\n    _id: { type: String },\n  }).validator(),\n  run({ _id }) {\n    Documents.remove(_id);\n  },\n});\n\nrateLimit({\n  methods: [\n    upsertDocument,\n    removeDocument,\n  ],\n  limit: 5,\n  timeRange: 1000,\n});\n"]},"hash":"5aade7888ab96ead1328b13954e359ebb1daab1b"}
